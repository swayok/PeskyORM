<?php

namespace App\Db;

use PeskyORMTest\TestingAdmins\TestingAdminsTableStructure;
use PeskyORM\ORM\Column;
use PeskyORM\ORM\Relation;
use PeskyORM\Core\DbExpr;
use PeskyORMTest\Traits\TestingIdColumnTrait;
use PeskyORMTest\Traits\TestingTimestampColumnsTrait;

/**
 * @property-read Column    $id
 * @property-read Column    $login
 * @property-read Column    $password
 * @property-read Column    $parent_id
 * @property-read Column    $created_at
 * @property-read Column    $updated_at
 * @property-read Column    $remember_token
 * @property-read Column    $is_superadmin
 * @property-read Column    $language
 * @property-read Column    $ip
 * @property-read Column    $role
 * @property-read Column    $is_active
 * @property-read Column    $name
 * @property-read Column    $email
 * @property-read Column    $timezone
 * @property-read Column    $not_changeable_column
 */
class AdminsTableStructure extends TestingAdminsTableStructure {

    use TestingIdColumnTrait,
        TestingTimestampColumnsTrait;

    /**
     * @return string
     */
    static public function getTableName() {
        return 'admins';
    }

    /**
     * @return string|null
     */
    static public function getSchema() {
        return 'public';
    }

    private function login() {
        return Column::create(Column::TYPE_STRING)
            ->uniqueValues()
            ->disallowsNullValues();
    }

    private function password() {
        return Column::create(Column::TYPE_STRING)
            ->disallowsNullValues();
    }

    private function parent_id() {
        return Column::create(Column::TYPE_INT)
            ->convertsEmptyStringToNull();
    }

    private function remember_token() {
        return Column::create(Column::TYPE_STRING)
            ->convertsEmptyStringToNull()
            ->setDefaultValue('');
    }

    private function is_superadmin() {
        return Column::create(Column::TYPE_BOOL)
            ->disallowsNullValues()
            ->setDefaultValue(false);
    }

    private function language() {
        return Column::create(Column::TYPE_STRING)
            ->convertsEmptyStringToNull()
            ->setDefaultValue('en');
    }

    private function ip() {
        return Column::create(Column::TYPE_STRING)
            ->convertsEmptyStringToNull()
            ->setDefaultValue('192.168.1.1');
    }

    private function role() {
        return Column::create(Column::TYPE_STRING)
            ->disallowsNullValues()
            ->setDefaultValue('');
    }

    private function is_active() {
        return Column::create(Column::TYPE_BOOL)
            ->disallowsNullValues()
            ->setDefaultValue(true);
    }

    private function name() {
        return Column::create(Column::TYPE_STRING)
            ->disallowsNullValues()
            ->setDefaultValue('');
    }

    private function email() {
        return Column::create(Column::TYPE_STRING)
            ->uniqueValues()
            ->convertsEmptyStringToNull();
    }

    private function timezone() {
        return Column::create(Column::TYPE_STRING)
            ->disallowsNullValues()
            ->setDefaultValue('UTC');
    }

    private function not_changeable_column() {
        return Column::create(Column::TYPE_STRING)
            ->convertsEmptyStringToNull()
            ->setDefaultValue('not changable');
    }

}
